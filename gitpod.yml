image:
  file: .gitpod.Dockerfile
tasks:
  - init: |
      mkdir -p /home/gitpod/.config/nix
      git clone https://github.com/input-output-hk/plutus-apps
      gp sync-done bundle
  - name: perf
    command: |
      htop
  - name: RUN
    init: gp sync-await bundle
    command: |
      cd plutus-apps/plutus-playground-server
      nix-shell
      GC_DONT_GC=1 nix-build -A plutus-playground.server
  - name: RUN 2
    init: gp sync-await bundle
    command: |
      cd plutus-apps/plutus-playground-client
      nix-shell
      npm run start
#   - name: vm - ssh
#     command: |
#       make ssh
  - name: nixos - console
    command: |
      make start
ports:
  - port: 2222
    onOpen: ignore
  - port: 8022
    onOpen: ignore
  - port: 8088
    onOpen: ignore

vscode:
  extensions:
    - bbenoist.Nix
