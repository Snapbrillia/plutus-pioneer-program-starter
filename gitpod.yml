image:
  file: .gitpod.Dockerfile
tasks:
  - init: |
      mkdir -p /home/gitpod/.config/nix
      echo 'substituters = https://hydra.iohk.io https://iohk.cachix.org https://cache.nixos.org/ trusted-public-keys = hydra.iohk.io:f/Ea+s+dFdN+3Y/G+FDgSq+a5NEWhJGzdjvKNGv0/EQ= iohk.cachix.org-1:DpRUyj7h7V830dp/i6Nti+NEO2/nhblbov/8MW7Rqoo= cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY=' >> /home/gitpod/.config/nix/nix.conf
  - name: perf
    command: |
      htop
#   - name: vm - ssh
#     command: |
#       make ssh
  - name: nixos - console
    command: |
      make start
ports:
  - port: 2222
    onOpen: ignore
  - port: 8022
    onOpen: ignore
  - port: 8088
    onOpen: ignore

vscode:
  extensions:
    - bbenoist.Nix
